<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>予約承認する</title>
<link rel="stylesheet" href="/src/main/resources/static/css/Reservation.css">
<script>
    function calculateAmountAndSubmit(form) {
        const unitPrice = parseFloat(form.amountInput.value);
        const count = parseInt(form.count.value);

        if (!isNaN(unitPrice) && !isNaN(count)) {
            form.amount.value = unitPrice * count;
            form.submit();
        } else {
            alert("金額または冊数が無効です。");
        }
    }
</script>
</head>
<body>
<button onclick="location.href='logout.jsp'">ログアウト</button>

<h2>予約承認</h2>

<table>
    <tr>
      <th>書名(タイトル)</th>
      <th>出版社</th>
      <th>冊</th>
      <th>名前</th>
    </tr>
    <tr>
      <td id="title"></td>
      <td id="publisher"></td>
      <td id="count"></td>
      <td id="name"></td>
    </tr>
  </table>
  
  <br>
  
  <!-- 変更可能な入力フォーム -->
  <form method="post" action="orderhistory.html" id="approvalForm">
    <table>
      <tr>
        <th>書名(タイトル)</th>
        <td><input type="text" name="title" /></td>
      </tr>
      <tr>
        <th>出版社</th>
        <td><input type="text" name="publisher" /></td>
      </tr>
      <tr>
        <th>冊数</th>
        <td><input type="text" name="count" /></td>
      </tr>
      <tr>
        <th>名前</th>
        <td><span id="formName"></span></td>
      </tr>
      <tr>
        <th>ISBNコード</th>
        <td><input type="text" name="ISBNcode" /></td>
      </tr>
      <tr>
        <th>金額（1冊）</th>
        <td><input type="text" name="amountInput" /></td>
      </tr>
    </table>
  
    <input type="hidden" name="approvalDate" />
    <input type="hidden" name="amount" />
  
    <button type="button" onclick="calculateAmountAndSubmit(this.form)">承認する</button>
    <button type="button" onclick="location.href='orderhistory.html'">注文履歴に戻る</button>
  </form>