<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>

<!DOCTYPE html>


<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>予約承認する</title>
<link rel="stylesheet" href="/src/main/resources/static/css/Reservation.css">
<script>
    function calculateAmountAndSubmit(form) {
        const unitPrice = parseFloat(form.amountInput.value);
        const count = parseInt(form.count.value);

        if (!isNaN(unitPrice) && !isNaN(count)) {
            form.amount.value = unitPrice * count;
            form.submit();
        } else {
            alert("金額または冊数が無効です。");
        }
    }
</script>
</head>
<body>
<button onclick="location.href='logout.jsp'">ログアウト</button>

<h2>予約承認</h2>

<table>
    <tr><th>タイトル</th><td><%= title %></td></tr>
    <tr><th>出版社</th><td><%= publisher %></td></tr>
    <tr><th>冊数</th><td><%= count %></td></tr>
    <tr><th>名前</th><td><%= name %></td></tr>
    <tr><th>ISBNコード</th>
        <td><input type="text" name="ISBNcode" form="approvalForm" /></td>
    </tr>
    <tr><th>金額（1冊）</th>
        <td><input type="text" name="amountInput" form="approvalForm" /></td>
    </tr>
</table>

<form method="post" action="orderhistory.html" id="approvalForm">
    <!-- 表示されないhidden項目 -->
    <input type="hidden" name="title" value="<%= title %>" />
    <input type="hidden" name="publisher" value="<%= publisher %>" />
    <input type="hidden" name="count" value="<%= count %>" />
    <input type="hidden" name="name" value="<%= name %>" />
    <input type="hidden" name="approvalDate" value="<%= approvalDate %>" />
    <input type="hidden" name="amount" /> <!-- 合計金額をここに設定 -->

    <button type="button" onclick="calculateAmountAndSubmit(this.form)">承認する</button>
    <button type="button" onclick="location.href='orderhistory.html'">注文履歴に戻る</button>
</form>
</body>
</html>